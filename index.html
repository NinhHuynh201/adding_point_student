<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω ƒêi·ªÉm Ph√°t Bi·ªÉu</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.35.7/dist/umd/supabase.min.js"></script>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <h2>üîê ƒêƒÉng Nh·∫≠p Admin</h2>
            <div class="input-group">
                <label for="adminKey">M√£ kh√≥a admin:</label>
                <input type="password" id="adminKey" placeholder="Nh·∫≠p m√£ kh√≥a...">
            </div>
            <button class="btn btn-primary" onclick="login()">ƒêƒÉng Nh·∫≠p</button>
            <div id="loginError" class="error" style="display: none;">M√£ kh√≥a kh√¥ng ƒë√∫ng!</div>
            <div id="loginLoading" style="display: none; color: #3182ce; margin-top: 10px;">ƒêang ki·ªÉm tra...</div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" style="display: none;">
        <div class="container">

            <!-- Home Page -->
            <div id="homePage" class="page active">
                <div class="header">
                    <h1>üéì Qu·∫£n L√Ω ƒêi·ªÉm Ph√°t Bi·ªÉu</h1>
                    <p>H·ªá th·ªëng theo d√µi v√† ph√°t bi·ªÉu c·ªßa h·ªçc vi√™n</p>
                </div>

                <div class="main-buttons">
                    <a href="#" class="main-btn" onclick="showPage('speakPage')">
                        <div class="icon">üó£Ô∏è</div>
                        <h3>Ph√°t Bi·ªÉu</h3>
                        <p>C·ªông ƒëi·ªÉm cho h·ªçc vi√™n ph√°t bi·ªÉu</p>
                    </a>
                    <a href="#" class="main-btn" onclick="showPage('resultsPage')">
                        <div class="icon">üìä</div>
                        <h3>K·∫øt Qu·∫£</h3>
                        <p>Xem l·ªãch s·ª≠ v√† th·ªëng k√™ ƒëi·ªÉm</p>
                    </a>
                </div>
            </div>

            <!-- Speak Page -->
            <div id="speakPage" class="page">
                <button class="btn btn-secondary back-btn" onclick="showPage('homePage')">‚Üê V·ªÅ Trang Ch·ªß</button>

                <div id="groupSelection">
                    <div class="header">
                        <h1>Ch·ªçn Nh√≥m Ph√°t Bi·ªÉu</h1>
                        <p>8 nh√≥m theo tr√°i Th√°nh Linh</p>
                    </div>
                    <div class="groups-grid" id="groupsGrid"></div>

                    <!-- Customize Positions Button -->
                    <div class="customize-btn-container">
                        <button class="customize-positions-btn" onclick="showPositionSelector()">
                            üéØ Tu·ª≥ ch·ªçn v·ªã tr√≠ c√°c nh√≥m
                        </button>
                    </div>
                </div>

                <!-- Position Selector -->
                <div id="positionSelector" style="display: none;">
                    <button class="btn btn-secondary" onclick="hidePositionSelector()">‚Üê Quay L·∫°i</button>
                    <div class="position-selector">
                        <div class="header">
                            <h1>üéØ S·∫Øp X·∫øp V·ªã Tr√≠ Nh√≥m</h1>
                            <p>Ch·ªçn v·ªã tr√≠ cho t·ª´ng nh√≥m theo s∆° ƒë·ªì l·ªõp h·ªçc</p>
                        </div>

                        <div class="position-grid" id="positionGrid"></div>

                        <div id="groupSelectorContainer" style="display: none;">
                            <h3 style="text-align: center; margin-bottom: 15px; color: #4a5568;">
                                Ch·ªçn nh√≥m cho v·ªã tr√≠ <span id="selectedPositionLabel"></span>
                            </h3>
                            <div class="group-selector" id="groupSelector"></div>
                        </div>

                        <div class="save-positions-container">
                            <button class="save-positions-btn" onclick="saveGroupPositions()">üíæ L∆∞u C·∫•u H√¨nh</button>
                            <button class="cancel-positions-btn" onclick="resetPositions()">üîÑ ƒê·∫∑t L·∫°i</button>
                        </div>
                    </div>
                </div>

                <div id="studentSelection" style="display: none;">
                    <button class="btn btn-secondary" onclick="backToGroups()">‚Üê Ch·ªçn L·∫°i Nh√≥m</button>
                    <div class="header">
                        <h1 id="selectedGroupTitle">Ch·ªçn H·ªçc Sinh</h1>
                    </div>
                    <div class="students-list" id="studentsList"></div>
                </div>

                <div id="sessionSelection" style="display: none;">
                    <button class="btn btn-secondary" onclick="backToStudents()">‚Üê Ch·ªçn L·∫°i H·ªçc Sinh</button>
                    <div class="header">
                        <h1>Ch·ªçn Bu·ªïi H·ªçc</h1>
                        <p id="selectedStudentInfo"></p>
                    </div>
                    <div class="sessions-grid" id="sessionsGrid"></div>
                </div>
            </div>

            <!-- Results Page -->
            <div id="resultsPage" class="page">
                <button class="btn btn-secondary back-btn" onclick="showPage('homePage')">‚Üê V·ªÅ Trang Ch·ªß</button>

                <div id="historyView">
                    <div class="results-container">
                        <div class="results-header">
                            <h2>üìà L·ªãch S·ª≠ Ph√°t Bi·ªÉu</h2>
                            <button class="btn btn-primary" onclick="showGroupStats()">Th·ªëng K√™ Theo Nh√≥m</button>
                        </div>
                        <div class="history-list" id="historyList"></div>
                    </div>
                </div>

                <div id="statsView" style="display: none;">
                    <div class="results-container">
                        <div class="results-header">
                            <h2>üìä Th·ªëng K√™ Theo Nh√≥m</h2>
                            <button class="btn btn-secondary" onclick="showHistory()">Xem L·ªãch S·ª≠</button>
                        </div>
                        <div class="stats-grid" id="statsGrid"></div>
                    </div>
                </div>

                <div id="groupDetailView" style="display: none;">
                    <div class="results-container">
                        <div class="results-header">
                            <h2 id="groupDetailTitle">Chi Ti·∫øt Nh√≥m</h2>
                            <button class="btn btn-secondary" onclick="showGroupStats()">‚Üê V·ªÅ Th·ªëng K√™</button>
                        </div>
                        <div class="history-list" id="groupDetailList"></div>
                    </div>
                </div>
            </div>

        </div>
        <p id="adminInfo" style="text-align: center; font-weight: bold; margin-bottom: 10px;"></p>
    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>


</body>

</html>